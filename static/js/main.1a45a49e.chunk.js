(this["webpackJsonppixel-pixy"]=this["webpackJsonppixel-pixy"]||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n(0),i=n.n(o),r=n(18),c=n.n(r),s=(n(84),n(4)),l=n(134),u=n(131),h=n(138),f=n(139),d=n(137),j=n(21),b=n(133),O=n(68),v=n(13),x=n(12),g=function(){function e(t,n,a){Object(v.a)(this,e),this.hsl=void 0,this.hsl=[t,n,a]}return Object(x.a)(e,null,[{key:"fromHSLString",value:function(t){var n=t.indexOf(",")>-1?",":" ",a=t.substr(4).split(")")[0].split(n),o=a[0],i=parseFloat(a[1].substr(0,a[1].length-1))/100,r=parseFloat(a[2].substr(0,a[2].length-1))/100,c=0;return o.indexOf("deg")>-1?o=o.substr(0,o.length-3):o.indexOf("rad")>-1?c=Math.round(parseFloat(o.substr(0,o.length-3))*(180/Math.PI)):o.indexOf("turn")>-1&&(c=Math.round(360*parseFloat(o.substr(0,o.length-4)))),c>=360&&(c%=360),new e(c,i,r)}},{key:"fromRGB",value:function(t,n,a){t/=255,n/=255,a/=255;var o,i=Math.min(t,n,a),r=Math.max(t,n,a),c=r-i,s=0;return s=0===c?0:r===t?(n-a)/c%6:r===n?(a-t)/c+2:(t-n)/c+4,(s=Math.round(60*s))<0&&(s+=360),o=(r+i)/2,new e(s,0===c?0:c/(1-Math.abs(2*o-1)),o)}}]),Object(x.a)(e,[{key:"toHSLString",value:function(){var e=Object(s.a)(this.hsl,3);return"hsl("+e[0]+","+100*e[1]+"%,"+100*e[2]+"%)"}},{key:"toRGB",value:function(){return p.fromHSL.apply(p,Object(j.a)(this.hsl))}},{key:"clone",value:function(){return Object(O.a)(e,Object(j.a)(this.hsl))}},{key:"h",get:function(){return this.hsl[0]},set:function(e){this.hsl[0]=e}},{key:"s",get:function(){return this.hsl[1]},set:function(e){this.hsl[1]=e}},{key:"l",get:function(){return this.hsl[2]},set:function(e){this.hsl[2]=e}}]),e}(),p=function(){function e(t,n,a){Object(v.a)(this,e),this.rgb=void 0,this.rgb=[t,n,a]}return Object(x.a)(e,null,[{key:"fromHSL",value:function(t,n,a){if(t<0||t>359)throw new RangeError("Hue should be between 0 and 359 inclusive");if(n<0||n>1)throw new RangeError("Saturation is a percentage and should be between 0 and 1 inclusive");if(a<0||a>1)throw new RangeError("Lightness is a percentage and should be between 0 and 1 inclusive");var o=(1-Math.abs(2*a-1))*n,i=o*(1-Math.abs(t/60%2-1)),r=a-o/2,c=0,s=0,l=0;return 0<=t&&t<60?(c=o,s=i,l=0):60<=t&&t<120?(c=i,s=o,l=0):120<=t&&t<180?(c=0,s=o,l=i):180<=t&&t<240?(c=0,s=i,l=o):240<=t&&t<300?(c=i,s=0,l=o):300<=t&&t<360&&(c=o,s=0,l=i),new e(c=Math.round(255*(c+r)),s=Math.round(255*(s+r)),l=Math.round(255*(l+r)))}},{key:"fromHex",value:function(t){if(!Number.isInteger(t))throw new TypeError("Number should be an integer, got: ".concat(t));if(t<0||t>26)throw new RangeError("Number should be between 0-16777215 inclusive");var n=t.toString(16);return e.fromHexString("#"+n)}},{key:"fromRGBString",value:function(t){var n=t.indexOf(",")>-1?",":" ",a=t.substr(4).split(")")[0].split(n),o=[];for(var i in a){var r=a[i];r.indexOf("%")>-1&&(o[i]=255*Math.round(parseFloat(r.substr(0,r.length-1))/100))}return new e(o[0],o[1],o[2])}},{key:"fromHexString",value:function(t){if(7!==t.length)throw new TypeError("Hex string is not 7 characters long. Got: "+t);if("#"!==t[0])throw new TypeError("Hex color string should start with #. Got: "+t[0]);return new e(parseInt("0x"+t[1]+t[2],16),parseInt("0x"+t[3]+t[4],16),parseInt("0x"+t[5]+t[6],16))}}]),Object(x.a)(e,[{key:"toHex",value:function(){var e=Object(s.a)(this.rgb,3),t=e[0],n=e[1],a=e[2],o=t.toString(16),i=n.toString(16),r=a.toString(16);return 1===o.length&&(o="0"+o),1===i.length&&(i="0"+i),1===r.length&&(r="0"+r),"#"+o+i+r}},{key:"toHSL",value:function(){return g.fromRGB.apply(g,Object(j.a)(this.rgb))}},{key:"r",get:function(){return this.rgb[0]},set:function(e){this.rgb[0]=e}},{key:"g",get:function(){return this.rgb[1]},set:function(e){this.rgb[1]=e}},{key:"b",get:function(){return this.rgb[2]},set:function(e){this.rgb[2]=e}}],[{key:"Equals",value:function(e,t){var n=Object(s.a)(e.rgb,3),a=n[0],o=n[1],i=n[2],r=Object(s.a)(t.rgb,3),c=r[0],l=r[1],u=r[2];return a===c&&o===l&&i===u}}]),e}();p.NO_COLOR="NO_COLOR";var m=function(e){var t=e.colorSelected,n=e.onColorPicked,i=Object(o.useState)([]),r=Object(s.a)(i,2),c=r[0],l=r[1];return Object(o.useEffect)((function(){if(0===c.filter((function(e){return p.Equals(e,t)})).length){var e=Object(j.a)(c);e.unshift(t),e.length>8&&(e=e.slice(0,8)),l(e)}}),[t]),Object(a.jsx)(d.a,{className:"ColorPickerHistory",direction:"row",justify:"start",wrap:!0,gap:"xxsmall",children:c.map((function(e,t){return Object(a.jsx)(d.a,{height:"xxsmall",width:"xxsmall",pad:{bottom:"xsmall"},children:Object(a.jsx)(b.a,{fill:"vertical",size:"small",onClick:function(){return n(e)},style:{backgroundColor:e.toHex(),border:"none"}},t)})}))})},C=function(e){var t=e.pinnedColors,n=void 0===t?[]:t,o=e.onColorPicked;return Object(a.jsx)(d.a,{className:"ColorPickerHistory",direction:"row",justify:"start",wrap:!0,gap:"xxsmall",children:n.slice(0,8).map((function(e,t){return Object(a.jsx)(d.a,{height:"xxsmall",width:"xxsmall",pad:{bottom:"xsmall"},children:Object(a.jsx)(b.a,{fill:"vertical",size:"small",onClick:function(){return o(e)},style:{backgroundColor:e.toHex(),border:"none"}},t)})}))})},k={c64:["#000000","#FFFFFF","#880000","#AAFFEE","#DD8855","#664400","#FF7777","#333333","#CC44CC","#00CC55","#0000AA","#EEEE77","#777777","#AAFF66","#0088FF","#BBBBBB"],cga:["#000000","#0000AA","#00AA00","#00AAAA","#555555","#5555FF","#55FF55","#55FFFF","#AA0000","#AA00AA","#AA5500","#AAAAAA","#FF5555","#FF55FF","#FFFF55","#FFFFFF"],teletext:["#000000","#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ffffff"]},y={c64:"Commodore 64",cga:"DOS CGA/ EGA",teletext:"Teletext"},w=function(e){var t=e.setColorAndTurnOffPicker,n=e.color,o=e.palette;return"history"===e.pickerMode?Object(a.jsx)(m,{onColorPicked:t,colorSelected:n}):Object(a.jsx)(C,{onColorPicked:t,pinnedColors:k[o].map((function(e){return p.fromHexString(e)}))})},M=(n(90),function(e){var t=e.onCanvasCreated,n=e.onTouchEvent,i=e.pixelDimensions,r=Object(o.useRef)(null);Object(o.useEffect)((function(){var e=r.current;e&&t(e)}),[t]);var c=function(e){var t=r.current;t&&n(t,e)};return Object(a.jsx)("canvas",{className:"CanvasContainer",style:{backgroundSize:"".concat(100/i/2,"%")},ref:r,width:i,height:i,onTouchEnd:c,onTouchMove:c})});function S(e){var t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY,a=e.target.getBoundingClientRect(),o=function(e,t,n){return Math.min(n,Math.max(e,t))},i=o(t-a.left,0,a.width-1),r=o(n-a.top,0,a.height-1);return{relativeX:i/a.width,relativeY:r/a.height}}n(91);var A,R,E=function(e){var t=e.selectedColor,n=e.onColorPicked,i=Object(o.useState)((function(){return t.toHSL()})),r=Object(s.a)(i,2),c=r[0],l=r[1];return Object(o.useEffect)((function(){var e=t.toHSL();e&&l(e)}),[t]),Object(a.jsxs)(h.a,{fill:!0,areas:[{name:"saturation-lightness",start:[0,0],end:[0,0]},{name:"hue",start:[0,1],end:[0,1]}],columns:["full"],rows:["auto","xxsmall"],children:[Object(a.jsxs)(f.a,{fill:!0,gridArea:"saturation-lightness",interactiveChild:1,children:[Object(a.jsx)(d.a,{className:"SelectedColor",style:{backgroundColor:"hsl(".concat(c.h,", 100%, 50%)")}}),Object(a.jsx)(d.a,{fill:!0,className:"Saturation",onTouchEnd:function(e){var t=S(e),a=t.relativeX,o=t.relativeY;c.s=a,c.l=(1-o)*(1-c.s/2),l(c.clone()),n(c.toRGB())},onTouchMove:function(e){var t=S(e),n=t.relativeX,a=t.relativeY;c.s=n,c.l=(1-a)*(1-c.s/2),l(c.clone())}}),Object(a.jsx)(d.a,{fill:!0,className:"Lightness"})]}),Object(a.jsx)(d.a,{fill:!0,gridArea:"hue",className:"Hue",onTouchEnd:function(e){var t=S(e).relativeX;c.h=360*t,l(c.clone())},onTouchMove:function(e){var t=S(e).relativeX;c.h=360*t,l(c.clone())}})]})},F=(n(92),function(e){var t=e.pixelDimensions,n=e.rootCanvas,i=Object(o.useRef)(null);return Object(o.useEffect)((function(){var e=i.current,n=null===e||void 0===e?void 0:e.getContext("2d");if(n&&e){n.clearRect(0,0,e.width,e.height),n.strokeStyle="lightgrey",n.lineWidth=1;for(var a=e.width/t,o=0;o<t;o++)n.moveTo(Math.round(o*a),0),n.lineTo(Math.round(o*a),e.height),n.stroke();for(var r=e.height/t,c=0;c<t;c++)n.moveTo(0,Math.round(c*r)),n.lineTo(e.width,Math.round(c*r)),n.stroke();return function(){n.clearRect(0,0,e.width,e.height)}}})),Object(a.jsx)("canvas",{ref:i,className:"Grid",width:n.clientWidth,height:n.clientHeight},t)}),B=n(136),T=n(140),P=function(e){var t=e.onAccept,n=e.onCancel,o=e.message,i=void 0===o?"Are you sure?":o,r=e.cancelButtonText,c=void 0===r?"Cancel":r,s=e.acceptButtonText,l=void 0===s?"Accept":s;return Object(a.jsx)(B.a,{modal:!0,position:"center",responsive:!1,full:"horizontal",onClickOutside:n,children:Object(a.jsxs)(d.a,{gap:"small",pad:"small",children:[Object(a.jsx)(T.a,{alignSelf:"center",children:i}),Object(a.jsxs)(d.a,{direction:"row",justify:"between",gap:"small",children:[Object(a.jsx)(b.a,{label:c,onClick:n,alignSelf:"start"}),Object(a.jsx)(b.a,{primary:!0,label:l,onClick:t,alignSelf:"end"})]})]})})},H=n(15),L=n(11),N=n(54),z=n(58),D=n(27);A=Symbol.iterator,R=Symbol.toStringTag;var G=function(){function e(t){if(Object(v.a)(this,e),this.map=new Map,this[R]=void 0,t){var n,a=Object(D.a)(t);try{for(a.s();!(n=a.n()).done;){var o=Object(s.a)(n.value,2),i=Object(s.a)(o[0],2),r=i[0],c=i[1],l=o[1];this.set([r,c],l)}}catch(u){a.e(u)}finally{a.f()}}}return Object(x.a)(e,[{key:"clear",value:function(){this.map.clear()}},{key:"delete",value:function(e){var t,n=Object(s.a)(e,2),a=n[0],o=n[1];return(null===(t=this.map.get(a))||void 0===t?void 0:t.delete(o))||!1}},{key:"clone",value:function(){return new e(this)}},{key:"forEach",value:function(e,t){this.toRefMap().forEach(e,t)}},{key:"toRefMap",value:function(){var e=new Map;return this.map.forEach((function(t,n,a){t.forEach((function(t,a,o){var i=[n,a];e.set(i,t)}))})),e}},{key:"get",value:function(e){var t,n=Object(s.a)(e,2),a=n[0],o=n[1];return null===(t=this.map.get(a))||void 0===t?void 0:t.get(o)}},{key:"has",value:function(e){var t,n=Object(s.a)(e,2),a=n[0],o=n[1];return(null===(t=this.map.get(a))||void 0===t?void 0:t.has(o))||!1}},{key:"set",value:function(e,t){var n=Object(s.a)(e,2),a=n[0],o=n[1];return this.map.has(a)||this.map.set(a,new Map),this.map.get(a).set(o,t),this}},{key:A,value:function(){return this.toRefMap()[Symbol.iterator]()}},{key:"entries",value:function(){return this.toRefMap().entries()}},{key:"keys",value:function(){return this.toRefMap().keys()}},{key:"values",value:function(){return this.toRefMap().values()}},{key:"toString",value:function(){var e,t=[],n=Object(D.a)(this);try{for(n.s();!(e=n.n()).done;){var a=Object(s.a)(e.value,2),o=a[0],i=a[1];t.push("".concat(o[0],", ").concat(o[1],", ").concat(i))}}catch(r){n.e(r)}finally{n.f()}return t.join("\n")}},{key:"size",get:function(){return this.toRefMap().size}}]),e}(),I=function(e){Object(N.a)(n,e);var t=Object(z.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).undoBuffer=void 0,a.undoBuffer=new _(a.getPixelMap().clone()),a}return Object(x.a)(n,[{key:"mutableMap",value:function(e){Object(H.a)(Object(L.a)(n.prototype),"mutableMap",this).call(this,e),this.undoBuffer.addCurrent(this.getPixelMap().clone())}},{key:"setColorAt",value:function(e,t,a){Object(H.a)(Object(L.a)(n.prototype),"setColorAt",this).call(this,e,t,a),this.undoBuffer.addCurrent(this.getPixelMap().clone())}},{key:"undo",value:function(){var e=this.undoBuffer.undo();this.setPixelMap(e)}},{key:"redo",value:function(){var e=this.undoBuffer.redoOne();void 0!==e&&this.setPixelMap(e)}}]),n}(function(){function e(t){Object(v.a)(this,e),this.pixelMap=new G,this.canvas=void 0;for(var n=0;n<t;n++)for(var a=0;a<t;a++){var o=[n,a],i=p.NO_COLOR;this.pixelMap.set(o,i)}}return Object(x.a)(e,[{key:"drawToCanvas",value:function(){if(void 0===this.canvas)throw new Error("Cannot draw to canvas, no canvas set");e.DrawToCanvas(this,this.canvas)}},{key:"setCanvas",value:function(t){if(!e.AreDimensionsCompatible(this,t))throw new RangeError("PaintCanvas and HTMLCanvas should be square and the same dimensions. Got PaintCanvas: ".concat(this.dimension()," canvas: ").concat(t.width,"x").concat(t.height));this.canvas=t}},{key:"hasCanvas",value:function(){return void 0!==this.canvas}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getPixelMap",value:function(){return this.pixelMap}},{key:"setPixelMap",value:function(e){if(e.size!==this.pixelMap.size)throw new RangeError("Cannot set pixel map. Pixel maps are not the same dimensions");this.pixelMap=e.clone()}},{key:"setPixelsFromImage",value:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("Could not get context for canvas");t.width=e.naturalWidth,t.height=e.naturalHeight,n.drawImage(e,0,0),this.setPixelsFromCanvas(t)}},{key:"setPixelsFromCanvas",value:function(e){var t=e.getContext("2d");if(!t)throw new Error("Could not get context for canvas");var n=e.width/this.dimension(),a=e.height/this.dimension();this.mutableMap((function(e){var o=Object(s.a)(e,2),i=o[0],r=o[1],c=t.getImageData(i*n,r*a,1,1).data,l=Object(s.a)(c,4),u=l[0],h=l[1],f=l[2];return 0===l[3]?p.NO_COLOR:new p(u,h,f)}))}},{key:"clear",value:function(){this.mutableMap((function(){return p.NO_COLOR}))}},{key:"setColorAt",value:function(e,t,n){if(!this.pixelMap.has([e,t]))throw RangeError("Pixel at ".concat(e,",").concat(t," does not exist"));this.pixelMap.set([e,t],n)}},{key:"getColorAt",value:function(e,t){var n=this.pixelMap.get([e,t]);if(void 0===n)throw RangeError("Pixel at ".concat(e,",").concat(t," does not exist"));return n}},{key:"mutableMap",value:function(e){var t,n=Object(D.a)(this.pixelMap.entries());try{for(n.s();!(t=n.n()).done;){var a=Object(s.a)(t.value,2),o=a[0],i=e(o,a[1]);this.pixelMap.set(o,i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"forEach",value:function(e){var t,n=Object(D.a)(this.pixelMap.entries());try{for(n.s();!(t=n.n()).done;){var a=Object(s.a)(t.value,2);e(a[0],a[1])}}catch(o){n.e(o)}finally{n.f()}}}],[{key:"DrawToCanvas",value:function(e,t){var n=t.getContext("2d");if(!n)throw new Error("Could not get context for canvas");e.forEach((function(e,t){var a=Object(s.a)(e,2),o=a[0],i=a[1];t!==p.NO_COLOR?(n.fillStyle=t.toHex(),n.fillRect(o,i,1,1)):n.clearRect(o,i,1,1)}))}},{key:"AreDimensionsCompatible",value:function(e,t){var n=t.width,a=t.height,o=e.dimension();return n===a&&o===n}}]),Object(x.a)(e,[{key:"dimension",value:function(){return Math.sqrt(this.pixelMap.size)}},{key:"touchEvent",value:function(e,t){var n=this.touchToCoords(e),a=n.quantX,o=n.quantY,i=this.getColorAt(a,o);"NO_COLOR"===t&&"NO_COLOR"===i||(("NO_COLOR"!==t||"NO_COLOR"===i)&&("NO_COLOR"===t||"NO_COLOR"!==i)?"NO_COLOR"!==t&&"NO_COLOR"!==i&&(p.Equals(t,i)||this.setColorAt(a,o,t)):this.setColorAt(a,o,t))}},{key:"touchToCoords",value:function(e){var t=S(e),n=t.relativeX,a=t.relativeY,o=n*this.dimension(),i=a*this.dimension();return{quantX:Math.floor(o),quantY:Math.floor(i)}}}]),e}()),_=function(e){Object(N.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).redoBuffer=new Array,e}return Object(x.a)(n,[{key:"undo",value:function(){var e=this.top();return void 0!==e&&this.getBufferLength()>1&&this.redoBuffer.push(e),Object(H.a)(Object(L.a)(n.prototype),"undo",this).call(this)}},{key:"addCurrent",value:function(e){this.redoBuffer=[],Object(H.a)(Object(L.a)(n.prototype),"addCurrent",this).call(this,e)}},{key:"getUndoSize",value:function(){return Object(H.a)(Object(L.a)(n.prototype),"getUndoSize",this).call(this)}},{key:"getRedoSize",value:function(){return this.redoBuffer.length}},{key:"redoOne",value:function(){var e=this.redoBuffer.pop();return void 0!==e&&Object(H.a)(Object(L.a)(n.prototype),"addCurrent",this).call(this,e),e}},{key:"clear",value:function(){this.redoBuffer=[],Object(H.a)(Object(L.a)(n.prototype),"clear",this).call(this)}}]),n}(function(){function e(t,n){Object(v.a)(this,e),this.base=t,this.maxSize=n,this.buffer=void 0,this.buffer=[t]}return Object(x.a)(e,[{key:"top",value:function(){return this.buffer[this.buffer.length-1]}},{key:"undo",value:function(){this.buffer.pop();var e=this.buffer[this.buffer.length-1];return e||(this.buffer=[this.base],this.base)}},{key:"addCurrent",value:function(e){this.buffer.push(e),this.maxSize&&this.maxSize<this.buffer.length&&(this.buffer=this.buffer.slice(-this.maxSize-2))}},{key:"getUndoSize",value:function(){return Math.max(this.buffer.length-2,0)}},{key:"getBufferLength",value:function(){return this.buffer.length}},{key:"clear",value:function(){this.buffer=[]}}]),e}()),q=n(121),X=n(122),U=n(120),Y=function(e){var t=e.canvas,n=Object(o.useRef)(null);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{icon:Object(a.jsx)(U.a,{}),onClick:function(e){var a=document.createElement("canvas");a.width=window.innerWidth,a.height=window.innerWidth;var o=a.getContext("2d");o.imageSmoothingEnabled=!1,o.drawImage(t,0,0,a.width,a.height);var i=a.toDataURL("image/png");n.current&&(n.current.href=i,n.current.click())}}),Object(a.jsx)("a",{ref:n,href:"/",style:{display:"none"},download:"my-pixel-art.png"})]})},W=function(e){var t=e.canvas,n=e.setCreateMenuShown;return Object(a.jsx)(d.a,{gridArea:"footer",direction:"row",pad:{left:"small",right:"small"},children:Object(a.jsxs)(h.a,{columns:{count:3,size:["auto","auto","auto"]},fill:!0,gap:"small",children:[Object(a.jsx)(d.a,{align:"start",children:Object(a.jsx)(b.a,{icon:Object(a.jsx)(q.a,{}),onClick:function(){return console.log("clicked")}})}),Object(a.jsx)(d.a,{align:"center",children:Object(a.jsx)(b.a,{icon:Object(a.jsx)(X.a,{}),onClick:function(){return n(!0)}})}),Object(a.jsx)(d.a,{align:"end",children:Object(a.jsx)(Y,{canvas:t})})]})})},J=n(132),K={"1x1":1,"8x8":8,"10x10":10,"12x12":12,"14x14":14,"16x16":16,"18x18":18,"20x20":20,"22x22":22,"24x24":24},Q={1:"1x1",8:"8x8",10:"10x10",12:"12x12",14:"14x14",16:"16x16",18:"18x18",20:"20x20",22:"22x22",24:"24x24"},V=["1x1","8x8","10x10","12x12","14x14","16x16","18x18","20x20","22x22","24x24"],Z=function(e){var t=e.dimension,n=e.onDimensionChange;return Object(a.jsx)(J.a,{name:"Select Dimensions",placeholder:"8x8",value:Q[t],options:V,onChange:function(e){var t=e.option;return n(K[t])}})},$=n(55),ee=n.n($),te=n(73),ne=function(e){var t=e.setLoadedImage,n=Object(o.useRef)(null);return Object(a.jsxs)(d.a,{direction:"row",gap:"small",children:[Object(a.jsx)(b.a,{label:"Choose File",onClick:function(){var e=n.current;e&&e.click()}}),Object(a.jsx)(T.a,{alignSelf:"center",onClick:function(){var e=n.current;e&&e.click()},children:"No File Chosen"}),Object(a.jsx)("input",{ref:n,style:{display:"none"},onChange:function(){var e=Object(te.a)(ee.a.mark((function e(n){var a,o;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise((function(e,t){if(n.target.files&&n.target.files[0]){var a=URL.createObjectURL(n.target.files[0]),o=new Image;o.src=a,o.onload=function(){return e(o)}}})),e.next=3,a;case 3:o=e.sent,n.target.value="",t(o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),type:"file",accept:"image/*"})]})},ae=function(e){var t=e.onClickOutside,n=e.onDimensionChange,o=e.dimension,i=e.setLoadedImage,r=e.setCreateMenuShown,c=e.createNew;return Object(a.jsx)(B.a,{modal:!0,position:"bottom",responsive:!1,full:"horizontal",onClickOutside:t,children:Object(a.jsxs)(d.a,{pad:"small",fill:!0,children:[Object(a.jsxs)(d.a,{pad:{top:"small",bottom:"small"},gap:"small",children:[Object(a.jsx)(T.a,{children:"Canvas Dimensions"}),Object(a.jsx)(Z,{onDimensionChange:n,dimension:o})]}),Object(a.jsxs)(d.a,{pad:{top:"small",bottom:"small"},gap:"small",children:[Object(a.jsx)(T.a,{children:"Upload Image (optional)"}),Object(a.jsx)(ne,{setLoadedImage:i})]}),Object(a.jsxs)(h.a,{columns:{count:2,size:["auto","auto"]},gap:"small",pad:{top:"medium",bottom:"small"},children:[Object(a.jsx)(b.a,{label:"Cancel",onClick:r}),Object(a.jsx)(b.a,{primary:!0,label:"Create New",onClick:c})]})]})})},oe=n(56),ie=function(e){var t=e.palette,n=e.onColorPicked,o=k[t].map(p.fromHexString);return Object(a.jsx)(oe.Box,{direction:"row",wrap:!0,justify:"between",alignSelf:"center",children:Object.values(o).map((function(e,t){return Object(a.jsx)(oe.Box,{height:"xsmall",width:"xsmall",pad:{bottom:"xsmall"},children:Object(a.jsx)(b.a,{fill:"vertical",size:"large",onClick:function(){return n(e)},style:{backgroundColor:e.toHex(),borderRadius:"0",border:"none"}},t)})}))})},re=["Commodore 64","DOS CGA/ EGA","Teletext"],ce={"Commodore 64":"c64","DOS CGA/ EGA":"cga",Teletext:"teletext"},se=function(e){var t=e.palette,n=e.onPaletteChange,o=y;return Object(a.jsx)(J.a,{name:"Select Palette",placeholder:o.c64,value:y[t],options:re,onChange:function(e){var t=e.option;return n(ce[t])}})},le=function(e){var t=e.onClickOutside,n=e.setColor,o=e.palette,i=e.setPalette;return Object(a.jsx)(B.a,{modal:!0,position:"top",responsive:!1,full:"horizontal",onClickOutside:t,children:Object(a.jsxs)(d.a,{pad:"small",fill:!0,children:[Object(a.jsx)(d.a,{fill:!0,pad:{top:"small",bottom:"small"},gap:"small",children:Object(a.jsx)(ie,{onColorPicked:function(e){n(e),t()},palette:o})}),Object(a.jsx)(d.a,{pad:{top:"small",bottom:"small"},gap:"small",children:Object(a.jsx)(se,{palette:o,onPaletteChange:i})}),Object(a.jsx)(h.a,{columns:{count:2,size:["auto","auto"]},gap:"small",pad:{top:"medium",bottom:"small"}})]})})},ue=n(123),he=n(124),fe=n(125),de=n(126),je=n(127),be=n(128),Oe=n(129),ve=n(130),xe=n(14),ge=n(9),pe=function(e){return Object(a.jsx)(ge.StyledIcon,Object(xe.a)(Object(xe.a)({viewBox:"0 0 6.35 6.35",a11yTitle:"Add"},e),{},{children:Object(a.jsxs)("g",{fill:"none",stroke:"#000","stroke-width":".52917",children:[Object(a.jsx)("path",{d:"m5.5002.60932c-.20131-.12441-.4432-.27888-.67352-.22451-.30901.072947-.38019.55202-.67352.67352-.13828.057276-.44901 0-.44901 0l-.22451.22451.22451.22451-2.9186 2.9186-.44901 1.347.22451.22451 1.347-.44901 2.9186-2.9186.22451.22451.22451-.22451s-.057276-.31073 1e-7-.44901c.1215-.29333.60057-.36451.67352-.67352.054371-.23032-.10009-.47221-.22451-.67352-.05564-.090027-.13448-.16887-.22451-.22451z"}),Object(a.jsx)("path",{d:"m3.7042 1.5073 1.1225 1.1225"})]})}))},me=function(e){return Object(a.jsxs)(ge.StyledIcon,Object(xe.a)(Object(xe.a)({viewBox:"0 0 6.35 6.35",a11yTitle:"Add"},e),{},{children:[Object(a.jsx)("path",{xmlns:"http://www.w3.org/2000/svg",d:"m5.926 3.1543c-.037745.39288-.36536.56457-.83971.54908-.38933-.01271-1.2873-.15741-1.475.24331-.22247.47492.58533.95042.5725 1.4362-.011288.42757-.61548.57263-1.0208.57263-1.526 0-2.763-1.2542-2.763-2.8012 2e-8-1.5471 1.237-2.8012 2.763-2.8012 1.526 0 2.911 1.2612 2.763 2.8012z","fill-opacity":"0","stroke-width":".52917"}),Object(a.jsx)("circle",{cx:"1.5769",cy:"3.5063",r:"0.3784252",stroke:"none"}),Object(a.jsx)("circle",{cx:"1.8923",cy:"2.1661",r:"0.3784252",stroke:"none"}),Object(a.jsx)("circle",{cx:"3.8408",cy:"1.7492",r:"0.3784252",stroke:"none"}),Object(a.jsx)("circle",{cx:"2.7456",cy:"1.4877",r:"0.3784252",stroke:"none"})]}))},Ce=n(74),ke=function(e){var t=e.onClick,n=e.isHighlighted,o=Object(Ce.a)(e,["onClick","isHighlighted"]);return Object(a.jsx)(b.a,Object(xe.a)({onClick:t,style:{borderRadius:"18px",boxShadow:n?"0 0 2px 2px green":"none"}},o))},ye=function(e){var t=e.onPickerModeClick,n=e.onUndoClick,o=e.onRedoClick,i=e.onPaletteButtonClick,r=e.onGridButtonClick,c=e.onEraserButtonClick,s=e.onPaintButtonClick,l=e.onDropperButtonClick,u=e.onTrashClick,f=e.isDropper,j=e.isGridShown,O=e.isErasing,v=e.color,x=e.pickerMode;return Object(a.jsxs)(h.a,{columns:["auto","auto"],rows:["flex","flex"],areas:[{name:"left-top",start:[0,0],end:[0,0]},{name:"left-bot",start:[0,1],end:[0,1]},{name:"right-top",start:[1,0],end:[1,0]},{name:"right-bot",start:[1,1],end:[1,1]}],children:[Object(a.jsxs)(d.a,{gridArea:"left-top",direction:"row",children:[Object(a.jsx)(ke,{primary:!0,onClick:s,isHighlighted:!O,icon:Object(a.jsx)(ue.a,{}),color:v.toHex()}),Object(a.jsx)(ke,{onClick:c,isHighlighted:O,icon:Object(a.jsx)(he.a,{})}),Object(a.jsx)(b.a,{onClick:i,icon:Object(a.jsx)(me,{})}),Object(a.jsx)(ke,{onClick:l,isHighlighted:f,icon:Object(a.jsx)(pe,{})})]}),Object(a.jsxs)(d.a,{gridArea:"left-bot",direction:"row",children:[Object(a.jsx)(ke,{icon:Object(a.jsx)(fe.a,{}),onClick:function(){return t("pinned")},isHighlighted:"pinned"===x}),Object(a.jsx)(ke,{icon:Object(a.jsx)(de.a,{}),onClick:function(){return t("history")},isHighlighted:"history"===x})]}),Object(a.jsxs)(d.a,{gridArea:"right-top",direction:"row",justify:"end",children:[Object(a.jsx)(b.a,{icon:Object(a.jsx)(je.a,{}),onClick:n}),Object(a.jsx)(b.a,{icon:Object(a.jsx)(be.a,{}),onClick:o})]}),Object(a.jsxs)(d.a,{gridArea:"right-bot",direction:"row",justify:"end",children:[Object(a.jsx)(b.a,{onClick:u,icon:Object(a.jsx)(Oe.a,{})}),Object(a.jsx)(ke,{onClick:r,isHighlighted:j,icon:Object(a.jsx)(ve.a,{})})]})]})};var we=function(){var e=Object(o.useState)(8),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(o.useState)(p.fromHexString("#5555ff")),c=Object(s.a)(r,2),j=c[0],b=c[1],O=function(e){e===p.NO_COLOR?z(!0):(z(!1),b(e))},v=Object(o.useState)(void 0),x=Object(s.a)(v,2),g=x[0],m=x[1],C=Object(o.useState)("pinned"),k=Object(s.a)(C,2),y=k[0],S=k[1],A=Object(o.useState)(!1),R=Object(s.a)(A,2),B=R[0],T=R[1],H=Object(o.useState)(!1),L=Object(s.a)(H,2),N=L[0],z=L[1],D=Object(o.useState)(!1),G=Object(s.a)(D,2),_=G[0],q=G[1],X=Object(o.useState)(!1),U=Object(s.a)(X,2),Y=U[0],J=U[1],K=Object(o.useState)("cga"),Q=Object(s.a)(K,2),V=Q[0],Z=Q[1],$=Object(o.useState)(!1),ee=Object(s.a)($,2),te=ee[0],ne=ee[1],oe=Object(o.useState)(),ie=Object(s.a)(oe,2),re=ie[0],ce=ie[1],se=Object(o.useMemo)((function(){return new I(n)}),[n]),ue=function(e){T(!1),O(e)};return Object(a.jsxs)(l.a,{theme:u.a,style:{height:"100%"},themeMode:"light",children:[Object(a.jsxs)(h.a,{fill:!0,areas:[{name:"canvas",start:[0,0],end:[0,0]},{name:"body",start:[0,1],end:[0,1]},{name:"footer",start:[0,2],end:[0,2]}],columns:["full"],rows:["auto","flex","xxsmall"],children:[Object(a.jsxs)(f.a,{gridArea:"canvas",interactiveChild:Y?1:"first",children:[Object(a.jsx)(M,{onCanvasCreated:function(e){ce(e),se.setCanvas(e)},pixelDimensions:n,onTouchEvent:function(e,t){if(B){var n=se.touchToCoords(t),a=se.getColorAt(n.quantX,n.quantY);return O(a),void T(!1)}se.setCanvas(e),se.touchEvent(t,N?p.NO_COLOR:j),se.drawToCanvas()}}),Y&&Object(a.jsx)(E,{selectedColor:j,onColorPicked:function(e){T(!1),O(e)}}),re&&_&&Object(a.jsx)(F,{pixelDimensions:n,rootCanvas:re})]}),Object(a.jsxs)(d.a,{gridArea:"body",pad:"small",children:[Object(a.jsx)(ye,{color:j,isDropper:B,isErasing:N,isGridShown:_,onPickerModeClick:S,onDropperButtonClick:function(){return T(!0)},onEraserButtonClick:function(){T(!1),O(p.NO_COLOR)},onGridButtonClick:function(){return q(!_)},onPaintButtonClick:function(){T(!1),O(j)},onPaletteButtonClick:function(){return J(!Y)},onRedoClick:function(){se.redo(),se.drawToCanvas()},onUndoClick:function(){se.undo(),se.drawToCanvas()},onTrashClick:function(){m({onAccept:function(){m(void 0),se.clear(),se.hasCanvas()?se.drawToCanvas():console.warn("Tried to clear a canvas that doesn't exist")},message:"Are you sure you want to clear the canvas?",acceptButtonText:"Clear",onCancel:function(){m(void 0)}})},pickerMode:y}),Object(a.jsx)(w,{pickerMode:y,color:j,palette:V,setColorAndTurnOffPicker:ue})]}),re&&Object(a.jsx)(W,{canvas:re,setCreateMenuShown:ne})]}),Y&&Object(a.jsx)(le,{onClickOutside:function(){return J(!1)},setColor:ue,palette:V,setPalette:function(e){return Z(e)}}),!!g&&Object(a.jsx)(P,{onAccept:g.onAccept,onCancel:g.onCancel,cancelButtonText:g.cancelButtonText,acceptButtonText:g.acceptButtonText,message:g.message}),te&&Object(a.jsx)(ae,{onClickOutside:function(){return ne(!1)},onDimensionChange:i,dimension:n,setLoadedImage:function(e){se.setPixelsFromImage(e),se.drawToCanvas()},setCreateMenuShown:function(){return ne(!1)},createNew:function(){se.clear(),se.drawToCanvas()}})]})};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(we,{})}),document.getElementById("root"))},84:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.1a45a49e.chunk.js.map