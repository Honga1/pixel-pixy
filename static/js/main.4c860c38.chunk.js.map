{"version":3,"sources":["components/CanvasContainer.tsx","drivers/HSLColor.ts","drivers/RGBColor.ts","components/ColorPickerHistory.tsx","components/PinnedColors.tsx","drivers/getRelativeClickPosition.tsx","components/ColorPickerSwatch.tsx","components/Grid.tsx","components/PaletteIcon.tsx","components/SaveButton.tsx","ConfirmModal.tsx","drivers/KeyPairMap.ts","drivers/PaintCanvas.ts","drivers/UndoRedoBuffer.ts","drivers/UndoBuffer.ts","drivers/UndoablePaintCanvas.ts","components/DimensionPicker.tsx","components/LoadButton.tsx","NewModal.tsx","PaletteDictionary.tsx","PaletteColorSwatch.tsx","PalettePicker.tsx","PaletteModal.tsx","components/DropperIcon.tsx","App.tsx","index.tsx"],"names":["CanvasContainer","onCanvasCreated","onTouchEvent","pixelDimensions","canvasRef","useRef","useEffect","canvas","current","onInnerTouchEvent","event","className","style","backgroundSize","ref","width","height","onTouchEnd","onTouchMove","HSLColor","hue","saturation","lightness","hsl","this","hslString","sep","indexOf","substr","split","hString","s","parseFloat","length","l","h","Math","round","PI","r","g","b","cMin","min","cMax","max","delta","abs","RGBColor","fromHSL","red","green","blue","rgb","RangeError","c","x","m","hex","Number","isInteger","TypeError","hexString","toString","fromHexString","rgbString","rgbChunks","rgbValues","R","parseInt","rString","gString","bString","fromRGB","a","r1","g1","b1","r2","g2","b2","NO_COLOR","ColorPickerHistory","colorSelected","onColorPicked","useState","colorHistory","setColorHistory","filter","color","Equals","newColorHistory","unshift","slice","Box","gap","Text","alignSelf","direction","justify","wrap","map","index","pad","bottom","Button","fill","size","onClick","backgroundColor","toHex","border","PinnedColors","pinnedColors","getRelativeClickPosition","screenX","changedTouches","clientX","screenY","clientY","rect","target","getBoundingClientRect","clip","value","clippedX","left","clippedY","top","relativeX","relativeY","ColorPickerSwatch","selectedColor","toHSL","currentHSL","setCurrentHSL","areas","name","start","end","columns","rows","Stack","gridArea","interactiveChild","scaledX","scaledY","clone","toRGB","Grid","rootCanvas","context","getContext","clearRect","strokeStyle","lineWidth","xIncrement","xIndex","moveTo","lineTo","stroke","yIncrement","yIndex","clientWidth","clientHeight","PaletteIcon","props","StyledIcon","viewBox","a11yTitle","xmlns","d","fill-opacity","stroke-width","cx","cy","SaveButton","anchorRef","icon","Share","fullScaleCanvas","document","createElement","window","innerWidth","imageSmoothingEnabled","drawImage","image","toDataURL","href","click","display","download","ConfirmModal","onAccept","onCancel","message","cancelButtonText","acceptButtonText","Layer","modal","position","responsive","full","onClickOutside","label","primary","Symbol","iterator","toStringTag","KeyPairMap","keyPairMap","Map","keyA","keyB","set","clear","get","delete","callbackfn","thisArg","toRefMap","forEach","tempMap","innerMap","outerMap","keys","has","entries","values","lines","key","push","join","PaintCanvas","dimension","pixelMap","y","undefined","Error","DrawToCanvas","AreDimensionsCompatible","naturalWidth","naturalHeight","setPixelsFromCanvas","xIntervals","yIntervals","mutableMap","data","getImageData","maybeColor","result","paintCanvas","fillStyle","fillRect","sqrt","quantX","floor","quantY","currentColor","getColorAt","setColorAt","UndoRedoBuffer","redoBuffer","Array","maybeTop","getBufferLength","redid","pop","base","maxSize","buffer","maybeReverseState","UndoablePaintCanvas","undoBuffer","getPixelMap","addCurrent","undo","setPixelMap","redo","redoOne","labelToValue","valueToLabel","1","8","10","12","14","16","18","20","22","24","options","DimensionPicker","onDimensionChange","Select","placeholder","onChange","option","LoadButton","setLoadedImage","input","imagePromise","Promise","resolve","reject","files","imageUrl","URL","createObjectURL","Image","src","onload","type","accept","NewModal","setCreateMenuShown","createNew","count","paletteColorDictionary","c64","cga","teletext","paletteNameDictionary","PaletteColourSwatch","palette","selectedPalette","Object","borderRadius","Teletext","PalettePicker","onPaletteChange","possiblePalettes","PaletteModal","setColor","setPalette","DropperIcon","App","setPixelDimensions","setColorMode","setIsErasing","confirmModalParameters","setConfirmModalParameters","isErasing","isGridShown","setGridShown","isPaletteMenuShown","setPaletteMenuShown","isCreateMenuShown","setCanvas","paint","useMemo","Grommet","theme","grommet","themeMode","touchEvent","drawToCanvas","Undo","Redo","align","boxShadow","Erase","Brush","colorString","hasCanvas","console","warn","Trash","right","Actions","log","Add","setPixelsFromImage","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4c860c38.chunk.js","sourcesContent":["import { TouchEvent, useEffect, useRef } from \"react\";\nimport \"../styles/CanvasContainer.css\";\n\nexport const CanvasContainer = ({\n  onCanvasCreated,\n  onTouchEvent,\n  pixelDimensions,\n}: {\n  pixelDimensions: number;\n  onCanvasCreated: (canvas: HTMLCanvasElement) => void;\n  onTouchEvent: (\n    canvas: HTMLCanvasElement,\n    touchEvent: TouchEvent<HTMLCanvasElement>\n  ) => void;\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (canvas) {\n      onCanvasCreated(canvas);\n    }\n  }, [onCanvasCreated]);\n\n  const onInnerTouchEvent = (event: TouchEvent<HTMLCanvasElement>) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    onTouchEvent(canvas, event);\n  };\n\n  return (\n    <canvas\n      className=\"CanvasContainer\"\n      style={{\n        backgroundSize: `${100 / pixelDimensions / 2}%`,\n      }}\n      ref={canvasRef}\n      width={pixelDimensions}\n      height={pixelDimensions}\n      onTouchEnd={onInnerTouchEvent}\n      onTouchMove={onInnerTouchEvent}\n    ></canvas>\n  );\n};\n","import { RGBColor } from \"./RGBColor\";\n\nexport class HSLColor {\n  /**\n   * @param hslString A string following the possible forms\n   * hsl(180 100% 50%)\n   * hsl(180deg,100%,50%)\n   * hsl(180deg 100% 50%)\n   * hsl(3.14rad,100%,50%)\n   * hsl(3.14rad 100% 50%)\n   * hsl(0.5turn,100%,50%)\n   * hsl(0.5turn 100% 50%)\n   */\n  static fromHSLString(hslString: string) {\n    let sep = hslString.indexOf(\",\") > -1 ? \",\" : \" \";\n    const hsl = hslString.substr(4).split(\")\")[0].split(sep);\n\n    let hString = hsl[0];\n    let s = parseFloat(hsl[1].substr(0, hsl[1].length - 1)) / 100;\n    let l = parseFloat(hsl[2].substr(0, hsl[2].length - 1)) / 100;\n\n    let h = 0;\n\n    if (hString.indexOf(\"deg\") > -1)\n      hString = hString.substr(0, hString.length - 3);\n    else if (hString.indexOf(\"rad\") > -1)\n      h = Math.round(\n        parseFloat(hString.substr(0, hString.length - 3)) * (180 / Math.PI)\n      );\n    else if (hString.indexOf(\"turn\") > -1)\n      h = Math.round(parseFloat(hString.substr(0, hString.length - 4)) * 360);\n    // Keep hue fraction of 360 if ending up over\n    if (h >= 360) h %= 360;\n\n    return new HSLColor(h, s, l);\n  }\n\n  static fromRGB(r: number, g: number, b: number) {\n    // Make r, g, and b fractions of 1\n    r /= 255;\n    g /= 255;\n    b /= 255;\n\n    // Find greatest and smallest channel values\n    let cMin = Math.min(r, g, b);\n    let cMax = Math.max(r, g, b);\n    let delta = cMax - cMin;\n    let h = 0;\n    let s = 0;\n    let l = 0;\n\n    // Calculate hue\n    // No difference\n    if (delta === 0) h = 0;\n    // Red is max\n    else if (cMax === r) h = ((g - b) / delta) % 6;\n    // Green is max\n    else if (cMax === g) h = (b - r) / delta + 2;\n    // Blue is max\n    else h = (r - g) / delta + 4;\n\n    h = Math.round(h * 60);\n\n    // Make negative hues positive behind 360°\n    if (h < 0) h += 360;\n\n    // Calculate lightness\n    l = (cMax + cMin) / 2;\n\n    // Calculate saturation\n    s = delta === 0 ? 0 : delta / (1 - Math.abs(2 * l - 1));\n\n    return new HSLColor(h, s, l);\n  }\n\n  constructor(hue: number, saturation: number, lightness: number) {\n    this.hsl = [hue, saturation, lightness];\n  }\n\n  hsl: [number, number, number];\n\n  get h() {\n    return this.hsl[0];\n  }\n  get s() {\n    return this.hsl[1];\n  }\n  get l() {\n    return this.hsl[2];\n  }\n\n  set h(h: number) {\n    this.hsl[0] = h;\n  }\n  set s(s: number) {\n    this.hsl[1] = s;\n  }\n  set l(l: number) {\n    this.hsl[2] = l;\n  }\n\n  toHSLString() {\n    const [h, s, l] = this.hsl;\n    return \"hsl(\" + h + \",\" + s * 100 + \"%,\" + l * 100 + \"%)\";\n  }\n\n  toRGB(): RGBColor {\n    return RGBColor.fromHSL(...this.hsl);\n  }\n\n  clone(): HSLColor {\n    return new HSLColor(...this.hsl);\n  }\n}\n","import { HSLColor } from \"./HSLColor\";\n\nexport type NoColor = \"NO_COLOR\";\nexport class RGBColor {\n  static readonly NO_COLOR: NoColor = \"NO_COLOR\";\n  /**\n   * @param h Degrees\n   * @param s Percent\n   * @param l Percent\n   */\n\n  static fromHSL(h: number, s: number, l: number) {\n    if (h < 0 || h > 359) {\n      throw new RangeError(\"Hue should be between 0 and 359 inclusive\");\n    }\n    if (s < 0 || s > 1) {\n      throw new RangeError(\n        \"Saturation is a percentage and should be between 0 and 1 inclusive\"\n      );\n    }\n    if (l < 0 || l > 1) {\n      throw new RangeError(\n        \"Lightness is a percentage and should be between 0 and 1 inclusive\"\n      );\n    }\n\n    let c = (1 - Math.abs(2 * l - 1)) * s;\n    let x = c * (1 - Math.abs(((h / 60) % 2) - 1));\n    let m = l - c / 2;\n    let r = 0;\n    let g = 0;\n    let b = 0;\n\n    if (0 <= h && h < 60) {\n      r = c;\n      g = x;\n      b = 0;\n    } else if (60 <= h && h < 120) {\n      r = x;\n      g = c;\n      b = 0;\n    } else if (120 <= h && h < 180) {\n      r = 0;\n      g = c;\n      b = x;\n    } else if (180 <= h && h < 240) {\n      r = 0;\n      g = x;\n      b = c;\n    } else if (240 <= h && h < 300) {\n      r = x;\n      g = 0;\n      b = c;\n    } else if (300 <= h && h < 360) {\n      r = c;\n      g = 0;\n      b = x;\n    }\n    r = Math.round((r + m) * 255);\n    g = Math.round((g + m) * 255);\n    b = Math.round((b + m) * 255);\n\n    return new RGBColor(r, g, b);\n  }\n\n  /**\n   * @param hex A number between 0-16777215\n   */\n  static fromHex(hex: number) {\n    if (!Number.isInteger(hex))\n      throw new TypeError(`Number should be an integer, got: ${hex}`);\n    if (hex < 0 || hex > (2 ^ 24)) {\n      throw new RangeError(\"Number should be between 0-16777215 inclusive\");\n    }\n\n    const hexString = hex.toString(16);\n\n    return RGBColor.fromHexString(\"#\" + hexString);\n  }\n\n  static fromRGBString(rgbString: string) {\n    let sep = rgbString.indexOf(\",\") > -1 ? \",\" : \" \";\n    const rgbChunks = rgbString.substr(4).split(\")\")[0].split(sep);\n    const rgbValues: number[] = [];\n\n    for (let R in rgbChunks) {\n      let r = rgbChunks[R];\n      if (r.indexOf(\"%\") > -1)\n        rgbValues[R] =\n          Math.round(parseFloat(r.substr(0, r.length - 1)) / 100) * 255;\n    }\n\n    const r = rgbValues[0];\n    const g = rgbValues[1];\n    const b = rgbValues[2];\n\n    return new RGBColor(r, g, b);\n  }\n\n  static fromHexString(hexString: string) {\n    if (hexString.length !== 7) {\n      throw new TypeError(\n        \"Hex string is not 7 characters long. Got: \" + hexString\n      );\n    }\n\n    if (hexString[0] !== \"#\") {\n      throw new TypeError(\n        \"Hex color string should start with #. Got: \" + hexString[0]\n      );\n    }\n\n    const r = parseInt(\"0x\" + hexString[1] + hexString[2], 16);\n    const g = parseInt(\"0x\" + hexString[3] + hexString[4], 16);\n    const b = parseInt(\"0x\" + hexString[5] + hexString[6], 16);\n\n    return new RGBColor(r, g, b);\n  }\n\n  constructor(red: number, green: number, blue: number) {\n    this.rgb = [red, green, blue];\n  }\n\n  rgb: [number, number, number];\n\n  get r() {\n    return this.rgb[0];\n  }\n  get g() {\n    return this.rgb[1];\n  }\n  get b() {\n    return this.rgb[2];\n  }\n\n  set r(r: number) {\n    this.rgb[0] = r;\n  }\n  set g(g: number) {\n    this.rgb[1] = g;\n  }\n  set b(b: number) {\n    this.rgb[2] = b;\n  }\n\n  static Equals(a: RGBColor, b: RGBColor) {\n    const [r1, g1, b1] = a.rgb;\n    const [r2, g2, b2] = b.rgb;\n\n    return r1 === r2 && g1 === g2 && b1 === b2;\n  }\n\n  toHex() {\n    const [r, g, b] = this.rgb;\n    let rString = r.toString(16);\n    let gString = g.toString(16);\n    let bString = b.toString(16);\n\n    if (rString.length === 1) rString = \"0\" + rString;\n    if (gString.length === 1) gString = \"0\" + gString;\n    if (bString.length === 1) bString = \"0\" + bString;\n\n    return \"#\" + rString + gString + bString;\n  }\n\n  toHSL(): HSLColor {\n    return HSLColor.fromRGB(...this.rgb);\n  }\n}\n","import { Box, Button, Text } from \"grommet\";\nimport { useEffect, useState } from \"react\";\nimport { RGBColor } from \"../drivers/RGBColor\";\nimport \"../styles/ColorPickerHistory.css\";\n\nexport const ColorPickerHistory = ({\n  colorSelected,\n  onColorPicked,\n}: {\n  colorSelected: RGBColor;\n  onColorPicked: (color: RGBColor) => void;\n}) => {\n  const [colorHistory, setColorHistory] = useState<RGBColor[]>([]);\n\n  useEffect(() => {\n    if (\n      colorHistory.filter((color) => {\n        return RGBColor.Equals(color, colorSelected);\n      }).length !== 0\n    ) {\n      return;\n    }\n\n    let newColorHistory = [...colorHistory];\n    newColorHistory.unshift(colorSelected);\n    if (newColorHistory.length > 8) {\n      newColorHistory = newColorHistory.slice(0, 8);\n    }\n\n    setColorHistory(newColorHistory);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [colorSelected]);\n\n  return (\n    <Box gap=\"small\">\n      <Text alignSelf=\"start\">Recent</Text>\n      <Box\n        className=\"ColorPickerHistory\"\n        direction=\"row\"\n        justify=\"start\"\n        wrap\n        gap=\"xxsmall\"\n      >\n        {colorHistory.map((color, index) => (\n          <Box height=\"xxsmall\" width=\"xxsmall\" pad={{ bottom: \"xsmall\" }}>\n            <Button\n              fill=\"vertical\"\n              size=\"small\"\n              onClick={() => onColorPicked(color)}\n              key={index}\n              style={{\n                backgroundColor: color.toHex(),\n                border: \"none\",\n              }}\n            ></Button>\n          </Box>\n        ))}\n      </Box>\n    </Box>\n  );\n};\n","import { Box, Button, Text } from \"grommet\";\nimport { RGBColor } from \"../drivers/RGBColor\";\nimport \"../styles/ColorPickerHistory.css\";\n\nexport const PinnedColors = ({\n  pinnedColors = [],\n  onColorPicked,\n}: {\n  pinnedColors: RGBColor[];\n  onColorPicked: (color: RGBColor) => void;\n}) => {\n  return (\n    <Box gap=\"small\">\n      <Text alignSelf=\"start\">Pinned</Text>\n      <Box\n        className=\"ColorPickerHistory\"\n        direction=\"row\"\n        justify=\"start\"\n        wrap\n        gap=\"xxsmall\"\n      >\n        {pinnedColors.slice(0, 8).map((color, index) => (\n          <Box height=\"xxsmall\" width=\"xxsmall\" pad={{ bottom: \"xsmall\" }}>\n            <Button\n              fill=\"vertical\"\n              size=\"small\"\n              onClick={() => onColorPicked(color)}\n              key={index}\n              style={{\n                backgroundColor: color.toHex(),\n                border: \"none\",\n              }}\n            ></Button>\n          </Box>\n        ))}\n      </Box>\n    </Box>\n  );\n};\n","import { TouchEvent } from \"react\";\n\nexport function getRelativeClickPosition(\n  event: TouchEvent<HTMLElement>\n): { relativeX: number; relativeY: number } {\n  const screenX = event.changedTouches[0].clientX;\n  const screenY = event.changedTouches[0].clientY;\n  const rect = (event.target as HTMLElement).getBoundingClientRect();\n\n  const clip = (value: number, min: number, max: number) =>\n    Math.min(max, Math.max(value, min));\n\n  const clippedX = clip(screenX - rect.left, 0, rect.width - 1);\n  const clippedY = clip(screenY - rect.top, 0, rect.height - 1);\n\n  const relativeX = clippedX / rect.width;\n  const relativeY = clippedY / rect.height;\n  return { relativeX: relativeX, relativeY: relativeY };\n}\n","import { Box, Grid, Stack } from \"grommet\";\nimport { useEffect, useState } from \"react\";\nimport { getRelativeClickPosition } from \"../drivers/getRelativeClickPosition\";\nimport { RGBColor } from \"../drivers/RGBColor\";\nimport \"../styles/ColorPickerSwatch.css\";\nexport const ColorPickerSwatch = ({\n  selectedColor,\n  onColorPicked,\n}: {\n  selectedColor: RGBColor;\n  onColorPicked: (color: RGBColor) => void;\n}) => {\n  const [currentHSL, setCurrentHSL] = useState(() => {\n    const hsl = selectedColor.toHSL();\n\n    return hsl;\n  });\n\n  useEffect(() => {\n    const hsl = selectedColor.toHSL();\n    if (hsl) {\n      setCurrentHSL(hsl);\n    }\n  }, [selectedColor]);\n\n  return (\n    <Grid\n      fill\n      areas={[\n        { name: \"saturation-lightness\", start: [0, 0], end: [0, 0] },\n        {\n          name: \"hue\",\n          start: [0, 1],\n          end: [0, 1],\n        },\n      ]}\n      columns={[\"full\"]}\n      rows={[\"auto\", \"xxsmall\"]}\n    >\n      <Stack fill gridArea=\"saturation-lightness\" interactiveChild={1}>\n        <Box\n          className=\"SelectedColor\"\n          style={{ backgroundColor: `hsl(${currentHSL.h}, 100%, 50%)` }}\n        />\n        <Box\n          fill\n          className=\"Saturation\"\n          onTouchEnd={(event) => {\n            const {\n              relativeX: scaledX,\n              relativeY: scaledY,\n            } = getRelativeClickPosition(event);\n            currentHSL.s = scaledX;\n            currentHSL.l = (1 - scaledY) * (1 - currentHSL.s / 2);\n            setCurrentHSL(currentHSL.clone());\n            onColorPicked(currentHSL.toRGB());\n          }}\n          onTouchMove={(event) => {\n            const {\n              relativeX: scaledX,\n              relativeY: scaledY,\n            } = getRelativeClickPosition(event);\n            currentHSL.s = scaledX;\n            currentHSL.l = (1 - scaledY) * (1 - currentHSL.s / 2);\n            setCurrentHSL(currentHSL.clone());\n          }}\n        />\n        <Box fill className=\"Lightness\" />\n      </Stack>\n      <Box\n        fill\n        gridArea=\"hue\"\n        className=\"Hue\"\n        onTouchEnd={(event) => {\n          const { relativeX: scaledX } = getRelativeClickPosition(event);\n          currentHSL.h = scaledX * 360;\n          setCurrentHSL(currentHSL.clone());\n        }}\n        onTouchMove={(event) => {\n          const { relativeX: scaledX } = getRelativeClickPosition(event);\n          currentHSL.h = scaledX * 360;\n          setCurrentHSL(currentHSL.clone());\n        }}\n      ></Box>\n    </Grid>\n  );\n};\n","import { useEffect, useRef } from \"react\";\nimport \"../styles/Grid.css\";\n\nexport const Grid = ({\n  pixelDimensions,\n  rootCanvas,\n}: {\n  pixelDimensions: number;\n  rootCanvas: HTMLCanvasElement;\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas?.getContext(\"2d\");\n\n    if (!context || !canvas) return;\n\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    context.strokeStyle = \"lightgrey\";\n    context.lineWidth = 1;\n    const xIncrement = canvas.width / pixelDimensions;\n    for (let xIndex = 0; xIndex < pixelDimensions; xIndex++) {\n      context.moveTo(Math.round(xIndex * xIncrement), 0);\n      context.lineTo(Math.round(xIndex * xIncrement), canvas.height);\n      context.stroke();\n    }\n\n    // Horizontal lines\n    const yIncrement = canvas.height / pixelDimensions;\n    for (let yIndex = 0; yIndex < pixelDimensions; yIndex++) {\n      context.moveTo(0, Math.round(yIndex * yIncrement));\n      context.lineTo(canvas.width, Math.round(yIndex * yIncrement));\n      context.stroke();\n    }\n\n    return () => {\n      context.clearRect(0, 0, canvas.width, canvas.height);\n    };\n  });\n  return (\n    <canvas\n      ref={canvasRef}\n      key={pixelDimensions}\n      className=\"Grid\"\n      width={rootCanvas.clientWidth}\n      height={rootCanvas.clientHeight}\n    />\n  );\n};\n","import React from \"react\";\nimport { IconProps } from \"grommet-icons\";\nimport { StyledIcon } from \"grommet-icons/StyledIcon\";\n\nexport const PaletteIcon = (props: IconProps) => (\n  <StyledIcon viewBox=\"0 0 6.35 6.35\" a11yTitle=\"Add\" {...props}>\n    <path\n      xmlns=\"http://www.w3.org/2000/svg\"\n      d=\"m5.926 3.1543c-.037745.39288-.36536.56457-.83971.54908-.38933-.01271-1.2873-.15741-1.475.24331-.22247.47492.58533.95042.5725 1.4362-.011288.42757-.61548.57263-1.0208.57263-1.526 0-2.763-1.2542-2.763-2.8012 2e-8-1.5471 1.237-2.8012 2.763-2.8012 1.526 0 2.911 1.2612 2.763 2.8012z\"\n      fill-opacity=\"0\"\n      stroke-width=\".52917\"\n    />\n    <circle cx=\"1.5769\" cy=\"3.5063\" r=\"0.3784252\" stroke=\"none\" />\n    <circle cx=\"1.8923\" cy=\"2.1661\" r=\"0.3784252\" stroke=\"none\" />\n    <circle cx=\"3.8408\" cy=\"1.7492\" r=\"0.3784252\" stroke=\"none\" />\n    <circle cx=\"2.7456\" cy=\"1.4877\" r=\"0.3784252\" stroke=\"none\" />\n  </StyledIcon>\n);\n","/* eslint-disable jsx-a11y/anchor-has-content */\nimport { Button } from \"grommet\";\nimport { Share } from \"grommet-icons\";\nimport { useRef } from \"react\";\n\nexport const SaveButton = ({ canvas }: { canvas: HTMLCanvasElement }) => {\n  const anchorRef = useRef<HTMLAnchorElement>(null);\n  return (\n    <>\n      <Button\n        icon={<Share />}\n        onClick={(event) => {\n          const fullScaleCanvas = document.createElement(\"canvas\");\n          fullScaleCanvas.width = window.innerWidth;\n          fullScaleCanvas.height = window.innerWidth;\n          const context = fullScaleCanvas.getContext(\"2d\")!;\n          context.imageSmoothingEnabled = false;\n          context.drawImage(\n            canvas,\n            0,\n            0,\n            fullScaleCanvas.width,\n            fullScaleCanvas.height\n          );\n\n          const image = fullScaleCanvas.toDataURL(\"image/png\");\n\n          if (anchorRef.current) {\n            anchorRef.current.href = image;\n            anchorRef.current.click();\n          }\n        }}\n      />\n      <a\n        ref={anchorRef}\n        href=\"/\"\n        style={{ display: \"none\" }}\n        download=\"my-pixel-art.png\"\n      />\n    </>\n  );\n};\n","import { Box, Button, Layer, Text } from \"grommet\";\nimport React from \"react\";\n\nexport type ConfirmModalProps = {\n  onAccept: () => void;\n  onCancel?: () => void;\n  message?: string;\n  acceptButtonText?: string;\n  cancelButtonText?: string;\n};\n\nexport const ConfirmModal = ({\n  onAccept,\n  onCancel,\n  message = \"Are you sure?\",\n  cancelButtonText = \"Cancel\",\n  acceptButtonText = \"Accept\",\n}: ConfirmModalProps) => {\n  return (\n    <Layer\n      modal\n      position=\"center\"\n      responsive={false}\n      full=\"horizontal\"\n      onClickOutside={onCancel}\n    >\n      <Box gap=\"small\" pad=\"small\">\n        <Text alignSelf=\"center\">{message}</Text>\n        <Box direction=\"row\" justify=\"between\" gap=\"small\">\n          <Button\n            label={cancelButtonText}\n            onClick={onCancel}\n            alignSelf=\"start\"\n          />\n          <Button\n            primary\n            label={acceptButtonText}\n            onClick={onAccept}\n            alignSelf=\"end\"\n          />\n        </Box>\n      </Box>\n    </Layer>\n  );\n};\n","export class KeyPairMap<KeyA, KeyB, Value> implements Map<[KeyA, KeyB], Value> {\n  constructor(keyPairMap?: KeyPairMap<KeyA, KeyB, Value>) {\n    if (!keyPairMap) return;\n\n    for (let [[keyA, keyB], value] of keyPairMap) {\n      this.set([keyA, keyB], value);\n    }\n  }\n\n  private map = new Map<KeyA, Map<KeyB, Value>>();\n\n  clear(): void {\n    this.map.clear();\n  }\n\n  delete([keyA, keyB]: [KeyA, KeyB]): boolean {\n    return this.map.get(keyA)?.delete(keyB) || false;\n  }\n\n  clone(): KeyPairMap<KeyA, KeyB, Value> {\n    return new KeyPairMap(this);\n  }\n\n  forEach(\n    callbackfn: (\n      value: Value,\n      key: [KeyA, KeyB],\n      map: Map<[KeyA, KeyB], Value>\n    ) => void,\n    thisArg?: any\n  ): void {\n    const refMap = this.toRefMap();\n\n    refMap.forEach(callbackfn, thisArg);\n  }\n\n  private toRefMap() {\n    const tempMap = new Map<[KeyA, KeyB], Value>();\n    this.map.forEach((innerMap, keyA, outerMap) => {\n      innerMap.forEach((value, keyB, innerMap) => {\n        const keys = [keyA, keyB] as [KeyA, KeyB];\n        tempMap.set(keys, value);\n      });\n    });\n    return tempMap;\n  }\n\n  get([keyA, keyB]: [KeyA, KeyB]): Value | undefined {\n    return this.map.get(keyA)?.get(keyB);\n  }\n\n  has([keyA, keyB]: [KeyA, KeyB]): boolean {\n    return this.map.get(keyA)?.has(keyB) || false;\n  }\n\n  set([keyA, keyB]: [KeyA, KeyB], value: Value): this {\n    const hasKeyA = this.map.has(keyA);\n\n    if (!hasKeyA) {\n      this.map.set(keyA, new Map());\n    }\n    this.map.get(keyA)!.set(keyB, value);\n\n    return this;\n  }\n\n  get size() {\n    return this.toRefMap().size;\n  }\n\n  [Symbol.iterator](): IterableIterator<[[KeyA, KeyB], Value]> {\n    return this.toRefMap()[Symbol.iterator]();\n  }\n\n  entries(): IterableIterator<[[KeyA, KeyB], Value]> {\n    return this.toRefMap().entries();\n  }\n\n  keys(): IterableIterator<[KeyA, KeyB]> {\n    return this.toRefMap().keys();\n  }\n\n  values(): IterableIterator<Value> {\n    return this.toRefMap().values();\n  }\n\n  toString(): string {\n    let lines = [];\n\n    for (let [key, value] of this) {\n      lines.push(`${key[0]}, ${key[1]}, ${value}`);\n    }\n\n    return lines.join(\"\\n\");\n  }\n  [Symbol.toStringTag]: string;\n}\n","import { getRelativeClickPosition } from \"./getRelativeClickPosition\";\nimport { KeyPairMap } from \"./KeyPairMap\";\nimport { NoColor, RGBColor } from \"./RGBColor\";\nexport class PaintCanvas {\n  static DrawToCanvas(paintCanvas: PaintCanvas, canvas: HTMLCanvasElement) {\n    const context = canvas.getContext(\"2d\");\n    if (!context) throw new Error(\"Could not get context for canvas\");\n    paintCanvas.forEach(([x, y], color) => {\n      if (color === RGBColor.NO_COLOR) {\n        context.clearRect(x, y, 1, 1);\n        return;\n      }\n\n      context.fillStyle = color.toHex();\n      context.fillRect(x, y, 1, 1);\n    });\n  }\n\n  static AreDimensionsCompatible(\n    paintCanvas: PaintCanvas,\n    canvas: HTMLCanvasElement\n  ) {\n    const { width, height } = canvas;\n    const dimension = paintCanvas.dimension();\n\n    if (width !== height) {\n      return false;\n    }\n\n    if (dimension !== width) {\n      return false;\n    }\n\n    return true;\n  }\n\n  drawToCanvas() {\n    if (this.canvas === undefined) {\n      throw new Error(\"Cannot draw to canvas, no canvas set\");\n    }\n\n    PaintCanvas.DrawToCanvas(this, this.canvas);\n  }\n\n  setCanvas(canvas: HTMLCanvasElement) {\n    if (!PaintCanvas.AreDimensionsCompatible(this, canvas)) {\n      throw new RangeError(\n        `PaintCanvas and HTMLCanvas should be square and the same dimensions. Got PaintCanvas: ${this.dimension()} canvas: ${\n          canvas.width\n        }x${canvas.height}`\n      );\n    }\n\n    this.canvas = canvas;\n  }\n\n  hasCanvas(): boolean {\n    return this.canvas !== undefined;\n  }\n\n  getCanvas(): HTMLCanvasElement | undefined {\n    return this.canvas;\n  }\n\n  private pixelMap = new KeyPairMap<number, number, RGBColor | NoColor>();\n\n  getPixelMap() {\n    return this.pixelMap;\n  }\n\n  setPixelMap(map: KeyPairMap<number, number, RGBColor | \"NO_COLOR\">) {\n    if (map.size !== this.pixelMap.size) {\n      throw new RangeError(\n        \"Cannot set pixel map. Pixel maps are not the same dimensions\"\n      );\n    }\n    this.pixelMap = map.clone();\n  }\n\n  setPixelsFromImage(image: HTMLImageElement) {\n    const canvas = document.createElement(\"canvas\");\n    const context = canvas.getContext(\"2d\");\n    if (!context) throw new Error(\"Could not get context for canvas\");\n\n    canvas.width = image.naturalWidth;\n    canvas.height = image.naturalHeight;\n    context.drawImage(image, 0, 0);\n\n    this.setPixelsFromCanvas(canvas);\n  }\n\n  setPixelsFromCanvas(canvas: HTMLCanvasElement) {\n    const context = canvas.getContext(\"2d\");\n    if (!context) throw new Error(\"Could not get context for canvas\");\n\n    const xIntervals = canvas.width / this.dimension();\n    const yIntervals = canvas.height / this.dimension();\n    this.mutableMap(([x, y]) => {\n      const { data } = context.getImageData(\n        x * xIntervals,\n        y * yIntervals,\n        1,\n        1\n      );\n\n      const [r, g, b, a] = data;\n      const color = a === 0 ? RGBColor.NO_COLOR : new RGBColor(r, g, b);\n      return color;\n    });\n  }\n\n  clear() {\n    this.mutableMap(() => RGBColor.NO_COLOR);\n  }\n\n  setColorAt(x: number, y: number, color: RGBColor | NoColor) {\n    const isPixelInRange = this.pixelMap.has([x, y]);\n\n    if (!isPixelInRange) {\n      throw RangeError(`Pixel at ${x},${y} does not exist`);\n    }\n\n    this.pixelMap.set([x, y], color);\n  }\n\n  getColorAt(x: number, y: number): RGBColor | NoColor {\n    const maybeColor = this.pixelMap.get([x, y]);\n\n    if (maybeColor === undefined)\n      throw RangeError(`Pixel at ${x},${y} does not exist`);\n\n    return maybeColor;\n  }\n\n  mutableMap(\n    callbackfn: (\n      coord: [x: number, y: number],\n      color: RGBColor | NoColor\n    ) => RGBColor | NoColor\n  ) {\n    for (let [key, value] of this.pixelMap.entries()) {\n      const result = callbackfn(key, value);\n      this.pixelMap.set(key, result);\n    }\n  }\n\n  forEach(\n    callbackfn: (\n      coord: [x: number, y: number],\n      color: RGBColor | NoColor\n    ) => void\n  ) {\n    for (let [key, value] of this.pixelMap.entries()) {\n      callbackfn(key, value);\n    }\n  }\n  private canvas?: HTMLCanvasElement;\n\n  constructor(dimension: number) {\n    for (let x = 0; x < dimension; x++) {\n      for (let y = 0; y < dimension; y++) {\n        const keys = [x, y] as [number, number];\n        const color = RGBColor.NO_COLOR;\n        this.pixelMap.set(keys, color);\n      }\n    }\n  }\n\n  dimension(): number {\n    return Math.sqrt(this.pixelMap.size);\n  }\n\n  touchEvent(event: React.TouchEvent<HTMLElement>, color: RGBColor | NoColor) {\n    const { relativeX, relativeY } = getRelativeClickPosition(event);\n    const scaledX = relativeX * this.dimension();\n    const scaledY = relativeY * this.dimension();\n    const quantX = Math.floor(scaledX);\n    const quantY = Math.floor(scaledY);\n\n    const currentColor = this.getColorAt(quantX, quantY);\n\n    if (color === \"NO_COLOR\" && currentColor === \"NO_COLOR\") {\n      return;\n    }\n\n    if (color === \"NO_COLOR\" && currentColor !== \"NO_COLOR\") {\n      this.setColorAt(quantX, quantY, color);\n      return;\n    }\n\n    if (color !== \"NO_COLOR\" && currentColor === \"NO_COLOR\") {\n      this.setColorAt(quantX, quantY, color);\n      return;\n    }\n\n    if (color !== \"NO_COLOR\" && currentColor !== \"NO_COLOR\") {\n      if (!RGBColor.Equals(color, currentColor)) {\n        this.setColorAt(quantX, quantY, color);\n      }\n    }\n  }\n}\n","import { UndoBuffer } from \"./UndoBuffer\";\n\nexport class UndoRedoBuffer<T> extends UndoBuffer<T> {\n  private redoBuffer = new Array<T>();\n\n  undo(): T {\n    const maybeTop = this.top();\n    if (maybeTop !== undefined && this.getBufferLength() > 1) {\n      this.redoBuffer.push(maybeTop);\n    }\n\n    const previousPoint = super.undo();\n    return previousPoint;\n  }\n\n  addCurrent(value: T) {\n    this.redoBuffer = [];\n    super.addCurrent(value);\n  }\n\n  getUndoSize() {\n    return super.getUndoSize();\n  }\n\n  getRedoSize() {\n    return this.redoBuffer.length;\n  }\n\n  redoOne(): T | undefined {\n    const redid = this.redoBuffer.pop();\n    if (redid !== undefined) {\n      super.addCurrent(redid);\n    }\n\n    return redid;\n  }\n\n  clear() {\n    this.redoBuffer = [];\n    super.clear();\n  }\n}\n","export class UndoBuffer<T> {\n  buffer: T[];\n\n  constructor(private base: T, private maxSize?: number) {\n    this.buffer = [base];\n  }\n\n  top() {\n    return this.buffer[this.buffer.length - 1] as T | undefined;\n  }\n\n  undo() {\n    this.buffer.pop();\n    const maybeReverseState = this.buffer[this.buffer.length - 1] as\n      | T\n      | undefined;\n    if (maybeReverseState) {\n      return maybeReverseState;\n    } else {\n      this.buffer = [this.base];\n      return this.base;\n    }\n  }\n\n  addCurrent(value: T) {\n    this.buffer.push(value);\n\n    if (this.maxSize && this.maxSize < this.buffer.length) {\n      this.buffer = this.buffer.slice(-this.maxSize - 2);\n    }\n  }\n\n  getUndoSize() {\n    return Math.max(this.buffer.length - 2, 0);\n  }\n\n  getBufferLength() {\n    return this.buffer.length;\n  }\n\n  clear() {\n    this.buffer = [];\n  }\n}\n","import { KeyPairMap } from \"./KeyPairMap\";\nimport { PaintCanvas } from \"./PaintCanvas\";\nimport { NoColor, RGBColor } from \"./RGBColor\";\nimport { UndoRedoBuffer } from \"./UndoRedoBuffer\";\n\nexport class UndoablePaintCanvas extends PaintCanvas {\n  undoBuffer: UndoRedoBuffer<KeyPairMap<number, number, RGBColor | \"NO_COLOR\">>;\n  constructor(dimension: number) {\n    super(dimension);\n\n    this.undoBuffer = new UndoRedoBuffer<\n      KeyPairMap<number, number, RGBColor | NoColor>\n    >(this.getPixelMap().clone());\n  }\n\n  mutableMap(\n    callbackfn: (\n      coord: [x: number, y: number],\n      color: RGBColor | NoColor\n    ) => RGBColor | NoColor\n  ) {\n    super.mutableMap(callbackfn);\n    this.undoBuffer.addCurrent(this.getPixelMap().clone());\n  }\n\n  setColorAt(x: number, y: number, color: RGBColor | NoColor) {\n    super.setColorAt(x, y, color);\n    this.undoBuffer.addCurrent(this.getPixelMap().clone());\n  }\n\n  undo() {\n    const undo = this.undoBuffer.undo();\n    this.setPixelMap(undo);\n  }\n\n  redo() {\n    const redo = this.undoBuffer.redoOne();\n    if (redo !== undefined) {\n      this.setPixelMap(redo);\n    }\n  }\n}\n","import { Select } from \"grommet\";\nimport { ReactElement } from \"react\";\nimport \"../styles/DimensionPicker.css\";\n\nconst validDimensions = [\n  { value: 1, label: \"1x1\" },\n  { value: 8, label: \"8x8\" },\n  { value: 10, label: \"10x10\" },\n  { value: 12, label: \"12x12\" },\n  { value: 14, label: \"14x14\" },\n  { value: 16, label: \"16x16\" },\n  { value: 18, label: \"18x18\" },\n  { value: 20, label: \"20x20\" },\n  { value: 22, label: \"22x22\" },\n  { value: 24, label: \"24x24\" },\n] as const;\n\nconst labelToValue = {\n  \"1x1\": 1,\n  \"8x8\": 8,\n  \"10x10\": 10,\n  \"12x12\": 12,\n  \"14x14\": 14,\n  \"16x16\": 16,\n  \"18x18\": 18,\n  \"20x20\": 20,\n  \"22x22\": 22,\n  \"24x24\": 24,\n} as const;\n\nconst valueToLabel = {\n  1: \"1x1\",\n  8: \"8x8\",\n  10: \"10x10\",\n  12: \"12x12\",\n  14: \"14x14\",\n  16: \"16x16\",\n  18: \"18x18\",\n  20: \"20x20\",\n  22: \"22x22\",\n  24: \"24x24\",\n} as const;\n\nconst options = [\n  \"1x1\",\n  \"8x8\",\n  \"10x10\",\n  \"12x12\",\n  \"14x14\",\n  \"16x16\",\n  \"18x18\",\n  \"20x20\",\n  \"22x22\",\n  \"24x24\",\n];\n\nexport type ValidDimensions = typeof validDimensions[number][\"value\"];\n\nexport const DimensionPicker = ({\n  dimension,\n  onDimensionChange,\n}: {\n  dimension: ValidDimensions;\n  onDimensionChange: (dimension: ValidDimensions) => void;\n}): ReactElement => {\n  return (\n    <Select\n      name=\"Select Dimensions\"\n      placeholder=\"8x8\"\n      value={valueToLabel[dimension]}\n      options={options}\n      onChange={({ option }: { option: keyof typeof labelToValue }) =>\n        onDimensionChange(labelToValue[option])\n      }\n    />\n  );\n};\n","import { Box, Button, Text } from \"grommet\";\nimport { useRef } from \"react\";\n\nexport const LoadButton = ({\n  setLoadedImage,\n}: {\n  setLoadedImage: (image: HTMLImageElement) => void;\n}) => {\n  const ref = useRef<HTMLInputElement>(null);\n  return (\n    <Box direction=\"row\" gap=\"small\">\n      <Button\n        label=\"Choose File\"\n        onClick={() => {\n          const input = ref.current;\n          if (!input) return;\n          input.click();\n        }}\n      />\n      <Text\n        alignSelf=\"center\"\n        onClick={() => {\n          const input = ref.current;\n          if (!input) return;\n          input.click();\n        }}\n      >\n        No File Chosen\n      </Text>\n      <input\n        ref={ref}\n        style={{ display: \"none\" }}\n        onChange={async (event) => {\n          const imagePromise = new Promise<HTMLImageElement>(\n            (resolve, reject) => {\n              if (!event.target.files || !event.target.files[0]) return;\n              const imageUrl = URL.createObjectURL(event.target.files![0]);\n              const image = new Image();\n              image.src = imageUrl;\n              image.onload = () => resolve(image);\n            }\n          );\n          const image = await imagePromise;\n          event.target.value = \"\";\n          setLoadedImage(image);\n        }}\n        type=\"file\"\n        accept=\"image/*\"\n      />\n    </Box>\n  );\n};\n","import { Layer, Box, Button, Grid, Text } from \"grommet\";\nimport React from \"react\";\nimport { DimensionPicker, ValidDimensions } from \"./components/DimensionPicker\";\nimport { LoadButton } from \"./components/LoadButton\";\n\nexport const NewModal = ({\n  onClickOutside,\n  onDimensionChange,\n  dimension,\n  setLoadedImage,\n  setCreateMenuShown,\n  createNew,\n}: {\n  onClickOutside: () => void;\n  onDimensionChange: (dimension: ValidDimensions) => void;\n  dimension: ValidDimensions;\n  setLoadedImage: (image: HTMLImageElement) => void;\n  setCreateMenuShown: () => void;\n  createNew: () => void;\n}) => {\n  return (\n    <Layer\n      modal\n      position=\"bottom\"\n      responsive={false}\n      full=\"horizontal\"\n      onClickOutside={onClickOutside}\n    >\n      <Box pad=\"small\" fill>\n        <Box pad={{ top: \"small\", bottom: \"small\" }} gap=\"small\">\n          <Text>Canvas Dimensions</Text>\n          <DimensionPicker\n            onDimensionChange={onDimensionChange}\n            dimension={dimension}\n          />\n        </Box>\n        <Box pad={{ top: \"small\", bottom: \"small\" }} gap=\"small\">\n          <Text>Upload Image (optional)</Text>\n          <LoadButton setLoadedImage={setLoadedImage} />\n        </Box>\n\n        <Grid\n          columns={{ count: 2, size: [\"auto\", \"auto\"] }}\n          gap=\"small\"\n          pad={{ top: \"medium\", bottom: \"small\" }}\n        >\n          <Button label=\"Cancel\" onClick={setCreateMenuShown} />\n\n          <Button primary label=\"Create New\" onClick={createNew} />\n        </Grid>\n      </Box>\n    </Layer>\n  );\n};\n","export const paletteColorDictionary: {\n  [key: string]: string[];\n} = {\n  c64: [\n    \"#000000\",\n    \"#FFFFFF\",\n    \"#880000\",\n    \"#AAFFEE\",\n    \"#DD8855\",\n    \"#664400\",\n    \"#FF7777\",\n    \"#333333\",\n    \"#CC44CC\",\n    \"#00CC55\",\n    \"#0000AA\",\n    \"#EEEE77\",\n    \"#777777\",\n    \"#AAFF66\",\n    \"#0088FF\",\n    \"#BBBBBB\",\n  ],\n  cga: [\n    \"#000000\",\n    \"#0000AA\",\n    \"#00AA00\",\n    \"#00AAAA\",\n    \"#555555\",\n    \"#5555FF\",\n    \"#55FF55\",\n    \"#55FFFF\",\n    \"#AA0000\",\n    \"#AA00AA\",\n    \"#AA5500\",\n    \"#AAAAAA\",\n    \"#FF5555\",\n    \"#FF55FF\",\n    \"#FFFF55\",\n    \"#FFFFFF\",\n  ],\n  teletext: [\n    \"#000000\",\n    \"#ff0000\",\n    \"#ffff00\",\n    \"#00ff00\",\n    \"#00ffff\",\n    \"#0000ff\",\n    \"#ff00ff\",\n    \"#ffffff\",\n  ],\n};\n\nexport const paletteNameDictionary = {\n  c64: \"Commodore 64\",\n  cga: \"DOS CGA/ EGA\",\n  teletext: \"Teletext\",\n} as const;\n\nexport type AvailablePalettes = keyof typeof paletteNameDictionary;\n","import { Button } from \"grommet\";\nimport { Box } from \"grommet/components/Box\";\nimport React from \"react\";\nimport { RGBColor } from \"./drivers/RGBColor\";\nimport { AvailablePalettes, paletteColorDictionary } from \"./PaletteDictionary\";\nimport \"./styles/PaletteColorSwatch.css\";\n\nexport const PaletteColourSwatch = ({\n  palette,\n  onColorPicked,\n}: {\n  palette: AvailablePalettes;\n  onColorPicked: (color: RGBColor) => void;\n}) => {\n  const paletteColors = paletteColorDictionary[palette];\n  const selectedPalette = paletteColors.map(RGBColor.fromHexString);\n  return (\n    <Box direction=\"row\" wrap justify=\"between\" alignSelf=\"center\">\n      {Object.values(selectedPalette).map((color, index) => (\n        <Box height=\"xsmall\" width=\"xsmall\" pad={{ bottom: \"xsmall\" }}>\n          <Button\n            fill=\"vertical\"\n            size=\"large\"\n            onClick={() => onColorPicked(color)}\n            key={index}\n            style={{\n              backgroundColor: color.toHex(),\n              borderRadius: \"0\",\n              border: \"none\",\n            }}\n          ></Button>\n        </Box>\n      ))}\n    </Box>\n  );\n};\n","import { Select } from \"grommet\";\nimport { ReactElement } from \"react\";\nimport { AvailablePalettes, paletteNameDictionary } from \"./PaletteDictionary\";\n\nconst options = [\"Commodore 64\", \"DOS CGA/ EGA\", \"Teletext\"];\n\nconst labelToValue = {\n  \"Commodore 64\": \"c64\",\n  \"DOS CGA/ EGA\": \"cga\",\n  Teletext: \"teletext\",\n} as const;\n\nexport const PalettePicker = ({\n  palette,\n  onPaletteChange,\n}: {\n  palette: AvailablePalettes;\n  onPaletteChange: (palette: AvailablePalettes) => void;\n}): ReactElement => {\n  const possiblePalettes = paletteNameDictionary;\n  return (\n    <Select\n      name=\"Select Palette\"\n      placeholder={possiblePalettes.c64}\n      value={paletteNameDictionary[palette]}\n      options={options}\n      onChange={({ option }: { option: keyof typeof labelToValue }) =>\n        onPaletteChange(labelToValue[option])\n      }\n    />\n  );\n};\n","import { Box, Grid, Layer } from \"grommet\";\nimport React from \"react\";\nimport { RGBColor } from \"./drivers/RGBColor\";\nimport { PaletteColourSwatch } from \"./PaletteColorSwatch\";\nimport { AvailablePalettes } from \"./PaletteDictionary\";\nimport { PalettePicker } from \"./PalettePicker\";\n\nexport const PaletteModal = ({\n  onClickOutside,\n  setColor,\n  palette,\n  setPalette,\n}: {\n  onClickOutside: () => void;\n  setColor: (color: RGBColor) => void;\n  palette: AvailablePalettes;\n  setPalette: (palette: AvailablePalettes) => void;\n}) => {\n  return (\n    <Layer\n      modal\n      position=\"top\"\n      responsive={false}\n      full=\"horizontal\"\n      onClickOutside={onClickOutside}\n    >\n      <Box pad=\"small\" fill>\n        <Box fill pad={{ top: \"small\", bottom: \"small\" }} gap=\"small\">\n          <PaletteColourSwatch\n            onColorPicked={(color) => {\n              setColor(color);\n              onClickOutside();\n            }}\n            palette={palette}\n          ></PaletteColourSwatch>\n        </Box>\n        <Box pad={{ top: \"small\", bottom: \"small\" }} gap=\"small\">\n          <PalettePicker\n            palette={palette}\n            onPaletteChange={setPalette}\n          ></PalettePicker>\n        </Box>\n\n        <Grid\n          columns={{ count: 2, size: [\"auto\", \"auto\"] }}\n          gap=\"small\"\n          pad={{ top: \"medium\", bottom: \"small\" }}\n        ></Grid>\n      </Box>\n    </Layer>\n  );\n};\n","import React from \"react\";\nimport { IconProps } from \"grommet-icons\";\nimport { StyledIcon } from \"grommet-icons/StyledIcon\";\n\nexport const DropperIcon = (props: IconProps) => (\n  <StyledIcon viewBox=\"0 0 6.35 6.35\" a11yTitle=\"Add\" {...props}>\n    <g fill=\"none\" stroke=\"#000\" stroke-width=\".52917\">\n      <path d=\"m5.5002.60932c-.20131-.12441-.4432-.27888-.67352-.22451-.30901.072947-.38019.55202-.67352.67352-.13828.057276-.44901 0-.44901 0l-.22451.22451.22451.22451-2.9186 2.9186-.44901 1.347.22451.22451 1.347-.44901 2.9186-2.9186.22451.22451.22451-.22451s-.057276-.31073 1e-7-.44901c.1215-.29333.60057-.36451.67352-.67352.054371-.23032-.10009-.47221-.22451-.67352-.05564-.090027-.13448-.16887-.22451-.22451z\" />\n      <path d=\"m3.7042 1.5073 1.1225 1.1225\" />\n    </g>\n  </StyledIcon>\n);\n","import { Box, Button, Grid, grommet, Grommet, Stack, Text } from \"grommet\";\nimport {\n  Actions,\n  Add,\n  Brush,\n  Erase,\n  Grid as GridIcon,\n  Redo,\n  Undo,\n  Trash,\n} from \"grommet-icons\";\nimport React, { useMemo, useState } from \"react\";\nimport { CanvasContainer } from \"./components/CanvasContainer\";\nimport { ColorPickerHistory } from \"./components/ColorPickerHistory\";\nimport { PinnedColors } from \"./components/PinnedColors\";\nimport { ColorPickerSwatch } from \"./components/ColorPickerSwatch\";\nimport { ValidDimensions } from \"./components/DimensionPicker\";\nimport { Grid as ComponentGrid } from \"./components/Grid\";\nimport { PaletteIcon } from \"./components/PaletteIcon\";\nimport { SaveButton } from \"./components/SaveButton\";\nimport { ConfirmModal, ConfirmModalProps } from \"./ConfirmModal\";\nimport { NoColor, RGBColor } from \"./drivers/RGBColor\";\nimport { UndoablePaintCanvas } from \"./drivers/UndoablePaintCanvas\";\nimport { NewModal } from \"./NewModal\";\nimport { AvailablePalettes, paletteColorDictionary } from \"./PaletteDictionary\";\nimport { PaletteModal } from \"./PaletteModal\";\nimport \"./styles/App.css\";\nimport { DropperIcon } from \"./components/DropperIcon\";\n\nconst defaultPalette = \"cga\";\nconst defaultColor = \"#5555ff\";\nfunction App() {\n  const [pixelDimensions, setPixelDimensions] = useState<ValidDimensions>(8);\n  const [color, setColor] = useState<RGBColor>(\n    RGBColor.fromHexString(defaultColor)\n  );\n\n  const setColorMode = (color: RGBColor | NoColor) => {\n    if (color === RGBColor.NO_COLOR) {\n      setIsErasing(true);\n    } else {\n      setIsErasing(false);\n      setColor(color);\n    }\n  };\n\n  const [confirmModalParameters, setConfirmModalParameters] = useState<\n    ConfirmModalProps | undefined\n  >(undefined);\n  const [isErasing, setIsErasing] = useState(false);\n  const [isGridShown, setGridShown] = useState(false);\n  const [isPaletteMenuShown, setPaletteMenuShown] = useState(false);\n  const [palette, setPalette] = useState<AvailablePalettes>(defaultPalette);\n  const [isCreateMenuShown, setCreateMenuShown] = useState(false);\n  const [canvas, setCanvas] = useState<undefined | HTMLCanvasElement>();\n\n  const paint = useMemo(() => {\n    return new UndoablePaintCanvas(pixelDimensions);\n  }, [pixelDimensions]);\n\n  return (\n    <Grommet theme={grommet} style={{ height: \"100%\" }} themeMode=\"light\">\n      <Grid\n        fill\n        areas={[\n          { name: \"canvas\", start: [0, 0], end: [0, 0] },\n          { name: \"body\", start: [0, 1], end: [0, 1] },\n          { name: \"footer\", start: [0, 2], end: [0, 2] },\n        ]}\n        columns={[\"full\"]}\n        rows={[\"auto\", \"flex\", \"xxsmall\"]}\n      >\n        <Stack\n          gridArea=\"canvas\"\n          interactiveChild={isPaletteMenuShown ? 1 : \"first\"}\n        >\n          <CanvasContainer\n            onCanvasCreated={(canvas) => {\n              setCanvas(canvas);\n              paint.setCanvas(canvas);\n            }}\n            pixelDimensions={pixelDimensions}\n            onTouchEvent={(canvas, event) => {\n              paint.setCanvas(canvas);\n              paint.touchEvent(event, isErasing ? RGBColor.NO_COLOR : color);\n              paint.drawToCanvas();\n            }}\n          />\n\n          {isPaletteMenuShown && (\n            <ColorPickerSwatch\n              selectedColor={color}\n              onColorPicked={setColorMode}\n            />\n          )}\n\n          {canvas && isGridShown && (\n            <ComponentGrid\n              pixelDimensions={pixelDimensions}\n              rootCanvas={canvas}\n            />\n          )}\n        </Stack>\n        <Box gridArea=\"body\" pad=\"small\">\n          <Grid\n            columns={{\n              count: 3,\n              size: [\"auto\", \"auto\", \"auto\"],\n            }}\n            rows=\"flex\"\n          >\n            <Box direction=\"row\" gap=\"\">\n              <Button\n                icon={<Undo />}\n                onClick={() => {\n                  paint.undo();\n                  paint.drawToCanvas();\n                }}\n              />\n              <Button\n                icon={<Redo />}\n                onClick={() => {\n                  paint.redo();\n                  paint.drawToCanvas();\n                }}\n              />\n            </Box>\n            <Box align=\"center\" justify=\"center\" direction=\"row-reverse\">\n              <Button\n                onClick={() => setPaletteMenuShown(!isPaletteMenuShown)}\n                icon={<PaletteIcon />}\n              />\n              <Button\n                onClick={() => setPaletteMenuShown(!isPaletteMenuShown)}\n                icon={<DropperIcon />}\n              />\n              <Button\n                icon={<GridIcon />}\n                style={{\n                  borderRadius: \"18px\",\n                  boxShadow: isGridShown ? \"0 0 2px 2px green\" : \"none\",\n                }}\n                onClick={() => setGridShown(!isGridShown)}\n              />\n            </Box>\n            <Box align=\"end\" justify=\"end\" direction=\"row\" gap=\"small\">\n              <Button\n                style={{\n                  // background: `url(${checkboardImageSrc})`,\n                  backgroundSize: \"20%\",\n                  borderRadius: \"18px\",\n                  boxShadow: isErasing ? \"0 0 2px 2px green\" : \"none\",\n                }}\n                onClick={() => setColorMode(RGBColor.NO_COLOR)}\n                icon={<Erase />}\n              />\n              <Button\n                primary\n                style={{\n                  boxShadow: !isErasing ? \"0 0 2px 2px green\" : \"none\",\n                }}\n                color={color.toHex()}\n                icon={<Brush />}\n                onClick={() => setColorMode(color)}\n              />\n            </Box>\n          </Grid>\n          <ColorPickerHistory onColorPicked={setColor} colorSelected={color} />\n          <PinnedColors\n            onColorPicked={setColor}\n            pinnedColors={paletteColorDictionary[palette].map((colorString) =>\n              RGBColor.fromHexString(colorString)\n            )}\n          />\n\n          {isPaletteMenuShown && (\n            <PaletteModal\n              onClickOutside={() => setPaletteMenuShown(false)}\n              setColor={(color) => setColorMode(color)}\n              palette={palette}\n              setPalette={(palette) => setPalette(palette)}\n            ></PaletteModal>\n          )}\n          <Box direction=\"row\" justify=\"end\">\n            <Button\n              onClick={() => {\n                setConfirmModalParameters({\n                  onAccept: () => {\n                    setConfirmModalParameters(undefined);\n\n                    paint.clear();\n                    if (paint.hasCanvas()) {\n                      paint.drawToCanvas();\n                    } else {\n                      console.warn(\n                        \"Tried to clear a canvas that doesn't exist\"\n                      );\n                    }\n                  },\n                  message: \"Are you sure you want to clear the canvas?\",\n                  acceptButtonText: \"Clear\",\n                  onCancel: () => {\n                    setConfirmModalParameters(undefined);\n                  },\n                });\n              }}\n              icon={<Trash />}\n            ></Button>\n          </Box>\n        </Box>\n\n        <Box\n          gridArea=\"footer\"\n          direction=\"row\"\n          pad={{ left: \"small\", right: \"small\" }}\n        >\n          <Grid\n            columns={{\n              count: 3,\n              size: [\"auto\", \"auto\", \"auto\"],\n            }}\n            fill\n            gap=\"small\"\n          >\n            <Box align=\"start\">\n              <Button\n                icon={<Actions />}\n                onClick={() => console.log(\"clicked\")}\n              />\n            </Box>\n            <Box align=\"center\">\n              <Button icon={<Add />} onClick={() => setCreateMenuShown(true)} />\n            </Box>\n            <Box align=\"end\">{canvas && <SaveButton canvas={canvas} />}</Box>\n          </Grid>\n        </Box>\n      </Grid>\n\n      {!!confirmModalParameters && (\n        <ConfirmModal\n          onAccept={confirmModalParameters.onAccept}\n          onCancel={confirmModalParameters.onCancel}\n          cancelButtonText={confirmModalParameters.cancelButtonText}\n          acceptButtonText={confirmModalParameters.acceptButtonText}\n          message={confirmModalParameters.message}\n        />\n      )}\n\n      {isCreateMenuShown && (\n        <NewModal\n          onClickOutside={() => setCreateMenuShown(false)}\n          onDimensionChange={setPixelDimensions}\n          dimension={pixelDimensions}\n          setLoadedImage={(image) => {\n            paint.setPixelsFromImage(image);\n            paint.drawToCanvas();\n          }}\n          setCreateMenuShown={() => setCreateMenuShown(false)}\n          createNew={() => {\n            paint.clear();\n            paint.drawToCanvas();\n          }}\n        ></NewModal>\n      )}\n    </Grommet>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}